<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tourster</title>
    <link rel="icon" href="https://i.ibb.co/jzq5C6n/tourster-transparent.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>

    <style>
        body {
            margin: 0;
            overscroll-behavior: none;
            background-color: rgb(229, 229, 229);
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
        }

        #messages_container {
            width: 100vw;
            height: calc(100vh - 60px);
        }

        #input_holder {
            width: 100vw;
            height: 60px;
            position: absolute;
            bottom: 0;
        }

        #message_input {
            width: calc(100vw - 50px);
            height: 25px;
            margin-left: 20px;
            margin-top: 15px;
            border-radius: 20px;
            border: 3px solid black;
            padding-left: 10px;
        }

        #message_input:focus {
            outline: none;
            border: 3px solid rgb(19, 197, 93);
        }

        #send_btn {
            height: 27px;
            width: 25px;
            position: absolute;
            top: 18px;
            right: 15px;
            outline: none;
            border: 0;
            border-left: 3px solid black;
            border-radius: 0 15px 15px 0;
        }

        #send_btn:hover {
            cursor: pointer;
        }

        #send_btn i {
            margin-left: -5px;
        }

        #messages {
            position: absolute;
            width: calc(100vw - 40px);
            height: calc(100vh - 60px - 40px);
            top: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        #messages ul {
            display: flex;
            flex-direction: column;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        #messages ul li {
            display: inline-block;
            max-width: 30%;
            padding: 10px;
            border-radius: 20px;
            margin-bottom: 15px;
            word-wrap: break-word;
            white-space: pre-wrap;
            opacity: 0;
            animation: fadeInSlideUp 0.5s ease-in-out forwards;
        }

        .list-ai {
            background-color: lightgray;
            align-self: flex-start;
        }

        .list-user {
            background-color: rgb(0, 145, 255);
            color: white;
            align-self: flex-end;
        }

        @keyframes fadeInSlideUp {
            from {
                opacity: 0;
                transform: translateY(100px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        #main-logo {
            position: absolute;
            width: 100px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: opacity 1s;
        }

        .spin-fade {
            animation: spin 0.5s linear;
            opacity: 0.3;
        }

        @keyframes spin {
            from {
                transform: translate(-50%, -50%) rotate(0deg);
            }
            to {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <img src="https://i.ibb.co/jzq5C6n/tourster-transparent.png" id="main-logo">
    <div id="messages_container">
        <div id="input_holder">
            <input type="text" placeholder="Type here..." id="message_input" autocomplete="off" onkeydown="input_key(event)">
            <button type="submit" id="send_btn" onclick="message_send()">
                <i class="fa-solid fa-paper-plane"></i>
            </button>
        </div>

        <div id="messages">
            <ul id="messages_list"></ul>
        </div>
    </div>

    <script>
        let message_input = document.getElementById("message_input");
        let messages_list = document.getElementById("messages_list");
        let messages = document.getElementById("messages");
        let mainLogo = document.getElementById("main-logo");

        let first_message = false;

        function animateLogo() {
            mainLogo.classList.add("spin-fade");
        }

        function msg(sender, text) {
            let message = document.createElement('li');
            message.classList.add(`list-${sender}`);

            if(sender == "ai"){
                message.innerHTML = "";
                
                let i = 0;
                function type() {
                    if (i < text.length) {
                        message.innerHTML += text.charAt(i);
                        i++;
                        setTimeout(type, 50);
                        scrollToBottom();
                    }
                }
                type();
            } else {
                message.innerHTML = text;
            }

            messages_list.appendChild(message)
        }

        function message_send() {
            msg("user", message_input.value)
            // fetch('https://api.openai.com/v1/chat/completions', {
            //     method: 'POST',
            //     headers: {
            //         'Authorization': `Bearer ${apiKey}`,
            //         'Content-Type': 'application/json'
            //     },
            //     body: JSON.stringify({
            //         "model": "gpt-3.5-turbo",
            //         "messages": [
            //             {
            //                 "role": "user",
            //                 "content": message_input.value
            //             }
            //         ],
            //         "max_tokens": 50
            //     })
            // }).then(response => {
            //     return response.json()
            // }).then(data => {
            //     console.log(data)
            //     msg("ai", "sent")
            // })    

            // fetch('https://gemini.googleapis.com/v1beta3/projects/PROJECT_ID/locations/LOCATION_ID/models/MODEL_ID:predict', {
            //     method: 'POST',
            //     headers: {
            //         'Authorization': `Bearer ${apiKey}`,
            //         'Content-Type': 'application/json'
            //     },
            //     body: JSON.stringify({
            //         "instances": [
            //             {
            //                 "prompt": message_input.value,
            //                 "max_tokens": 50
            //             }
            //         ]
            //     })
            // }).then(response => {
            //     return response.json()
            // }).then(data => {
            //     console.log(data)
            //     msg("ai", "sent")
            // })    

            message_input.value = '';
            scrollToBottom();

            if (!first_message) {
                first_message = true;
                animateLogo();
            }
        }
        window.message_send = message_send;

        function input_key(e) {
            if (e.keyCode == 13) {
                message_send();
            }
        }
        window.input_key = input_key;

        function scrollToBottom() {
            messages.scrollTop = messages.scrollHeight;
        }
    </script>
</body>
</html>